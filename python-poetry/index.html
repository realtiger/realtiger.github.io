<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="aaron">



<meta name="description" content="poetry是一个python的依赖管理和打包工具，类似于nodejs的npm和java的maven，可以用来管理python项目的依赖和打包发布。">
<meta property="og:type" content="article">
<meta property="og:title" content="python依赖管理和打包工具poetry">
<meta property="og:url" content="http://realtiger.github.io/python-poetry/index.html">
<meta property="og:site_name" content="一雾银的博客">
<meta property="og:description" content="poetry是一个python的依赖管理和打包工具，类似于nodejs的npm和java的maven，可以用来管理python项目的依赖和打包发布。">
<meta property="og:locale">
<meta property="article:published_time" content="2024-01-04T11:54:49.000Z">
<meta property="article:modified_time" content="2024-01-05T10:31:42.199Z">
<meta property="article:author" content="aaron">
<meta property="article:tag" content="python">
<meta property="article:tag" content="poetry">
<meta name="twitter:card" content="summary">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="一雾银的博客" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">



<link rel="stylesheet" href="/css/style.css">




<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>python依赖管理和打包工具poetry | 一雾银的博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






<meta name="generator" content="Hexo 6.3.0"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">aaron</a></h1>
        </hgroup>

        
        <p class="header-subtitle">不爱游戏的程序员不是一个好厨师</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload>
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class="no-result">No results found <i class="fa fa-spinner fa-pulse"></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:ganchangde@163.com" title="Email" rel="external nofollow noopener noreferrer" target="_blank"></a>
                            
                                <a class="fa GitHub" target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/realtiger" title="GitHub"></a>
                            
                                <a class="fa 知乎" target="_blank" rel="external nofollow noopener noreferrer" href="https://www.zhihu.com/people/realtiger" title="知乎"></a>
                            
                                <a class="fa 博客园" target="_blank" rel="external nofollow noopener noreferrer" href="https://www.cnblogs.com/cdinc" title="博客园"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAS/" rel="tag">CAS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JWT/" rel="tag">JWT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OAuth2/" rel="tag">OAuth2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OIDC/" rel="tag">OIDC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSO/" rel="tag">SSO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/StorageClass/" rel="tag">StorageClass</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/alertmanager/" rel="tag">alertmanager</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/auth/" rel="tag">auth</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/certificate/" rel="tag">certificate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ci-cd/" rel="tag">ci&#x2F;cd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cni/" rel="tag">cni</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/containerd/" rel="tag">containerd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devops/" rel="tag">devops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/etcd/" rel="tag">etcd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grafana/" rel="tag">grafana</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/helm/" rel="tag">helm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hpa/" rel="tag">hpa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/httpx/" rel="tag">httpx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iptables/" rel="tag">iptables</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jenkins/" rel="tag">jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/monitoring/" rel="tag">monitoring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/poetry/" rel="tag">poetry</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/prometheus/" rel="tag">prometheus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pv/" rel="tag">pv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pvc/" rel="tag">pvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pypi/" rel="tag">pypi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rabbitmq/" rel="tag">rabbitmq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scheduler/" rel="tag">scheduler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/" rel="tag">ssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/targets/" rel="tag">targets</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="external nofollow noopener noreferrer" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="external nofollow noopener noreferrer" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" target="_blank" rel="external nofollow noopener noreferrer" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">一个啥都想学的菜鸡</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">aaron</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">aaron</a></h1>
            </hgroup>
            
            <p class="header-subtitle">不爱游戏的程序员不是一个好厨师</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:ganchangde@163.com" title="Email" rel="external nofollow noopener noreferrer"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/realtiger" title="GitHub" rel="external nofollow noopener noreferrer"></a>
                            
                                <a class="fa 知乎" target="_blank" href="https://www.zhihu.com/people/realtiger" title="知乎" rel="external nofollow noopener noreferrer"></a>
                            
                                <a class="fa 博客园" target="_blank" href="https://www.cnblogs.com/cdinc" title="博客园" rel="external nofollow noopener noreferrer"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我">
</nav>
      <div class="body-wrap"><article id="post-python-poetry" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/python-poetry/" class="article-date">
      <time datetime="2024-01-04T11:54:49.000Z" itemprop="datePublished">2024-01-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      python依赖管理和打包工具poetry
    </h1>
  

          
              <div style="margin-top:10px">
    <span class="post-time">
      <span class="post-meta-item-icon">
        <i class="fa fa-keyboard-o"></i>
        <span class="post-meta-item-text">  字数统计: </span>
        <span class="post-count">5.1k字</span>
      </span>
    </span>

    <span class="post-time">
      &nbsp; | &nbsp;
      <span class="post-meta-item-icon">
        <i class="fa fa-hourglass-half"></i>
        <span class="post-meta-item-text">  阅读时长: </span>
        <span class="post-count">22分</span>
      </span>
    </span>
</div>
          
      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/poetry/" rel="tag">poetry</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>poetry是一个python的依赖管理和打包工具，类似于nodejs的npm和java的maven，可以用来管理python项目的依赖和打包发布。</p>
<span id="more"></span>

<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="正常安装"><a href="#正常安装" class="headerlink" title="正常安装"></a>正常安装</h2><p>poetry需要python3.8以上的版本，这里实验使用官方安装程序安装，安装平台是ubuntu系统，其他安装方式可以参考<a target="_blank" rel="external nofollow noopener noreferrer" href="https://python-poetry.org/docs/#installing-with-the-offcial-installer">官方文档</a></p>
<p>如果没有python3.8以上的版本，可以使用以下命令安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo apt install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev libsqlite3-dev wget libbz2-dev</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">wget https://www.python.org/ftp/python/3.12.1/Python-3.12.1.tar.xz</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tar -xf Python-3.12.1.tar.xz</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> Python-3.12.1</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./configure --enable-optimizations --prefix=/usr/local/python3.12</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">make -j 8</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo make install</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo <span class="built_in">ln</span> -s /usr/local/python3.12/bin/python3.12 /usr/bin/python3.12</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo <span class="built_in">ln</span> -s /usr/local/python3.12/bin/pip3.12 /usr/bin/pip3.12</span></span><br></pre></td></tr></table></figure>

<p>有了python环境后，就可以安装poetry了。我目前登录的用户是ubuntu，因此下面的用户家目录是<code>/home/ubuntu</code>，如果是其他用户，需要替换成对应的用户家目录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过命令安装</span></span><br><span class="line">$ curl -sSL https://install.python-poetry.org | python3.12 -</span><br><span class="line"></span><br><span class="line">Retrieving Poetry metadata</span><br><span class="line"></span><br><span class="line"><span class="comment"># Welcome to Poetry!</span></span><br><span class="line"></span><br><span class="line">This will download and install the latest version of Poetry,</span><br><span class="line">a dependency and package manager <span class="keyword">for</span> Python.</span><br><span class="line"></span><br><span class="line">It will add the `poetry` <span class="built_in">command</span> to Poetry<span class="string">&#x27;s bin directory, located at:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">/home/ubuntu/.local/bin</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">You can uninstall at any time by executing this script with the --uninstall option,</span></span><br><span class="line"><span class="string">and these changes will be reverted.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Installing Poetry (1.7.1): Done</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Poetry (1.7.1) is installed now. Great!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To get started you need Poetry&#x27;</span>s bin directory (/home/ubuntu/.local/bin) <span class="keyword">in</span> your `PATH`</span><br><span class="line">environment variable.</span><br><span class="line"></span><br><span class="line">Add `<span class="built_in">export</span> PATH=<span class="string">&quot;/home/ubuntu/.local/bin:<span class="variable">$PATH</span>&quot;</span>` to your shell configuration file.</span><br><span class="line"></span><br><span class="line">Alternatively, you can call Poetry explicitly with `/home/ubuntu/.local/bin/poetry`.</span><br><span class="line"></span><br><span class="line">You can <span class="built_in">test</span> that everything is <span class="built_in">set</span> up by executing:</span><br><span class="line"></span><br><span class="line">`poetry --version`</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看poetry二进制命令的位置</span></span><br><span class="line">$ <span class="built_in">ls</span> -l ~/.local/bin/poetry</span><br><span class="line">lrwxrwxrwx 1 ubuntu ubuntu 50 Jan  4 14:08 /home/ubuntu/.local/bin/poetry -&gt; /home/ubuntu/.local/share/pypoetry/venv/bin/poetry</span><br><span class="line">$ <span class="built_in">ls</span> -l ~/.local/share/pypoetry/venv/bin/poetry</span><br><span class="line">-rwxrwxr-x 1 ubuntu ubuntu 259 Jan  4 14:08 /home/ubuntu/.local/share/pypoetry/venv/bin/poetry</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看poetry版本，因为路径已经添加到PATH中，因此可以直接执行poetry命令</span></span><br><span class="line">$ poetry --version</span><br><span class="line">Poetry (version 1.7.1)</span><br></pre></td></tr></table></figure>

<h2 id="指定安装目录"><a href="#指定安装目录" class="headerlink" title="指定安装目录"></a>指定安装目录</h2><p>默认情况下，Linux系统会安装到<code>~/.local/share/pypoetry</code>目录下，如果需要修改安装目录，可以使用<code>POETRY_HOME</code>环境变量，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sSL https://install.python-poetry.org | POETRY_HOME=/opt/poetry python3.12 -</span><br></pre></td></tr></table></figure>

<h2 id="指定发行版本"><a href="#指定发行版本" class="headerlink" title="指定发行版本"></a>指定发行版本</h2><p>如果安装预发行版本，可以使用<code>--preview</code>选项或者使用<code>POETRY_PREVIEW</code>环境变量，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sSL https://install.python-poetry.org | python3.12 - --preview</span><br><span class="line">$ curl -sSL https://install.python-poetry.org | POETRY_PREVIEW=1 python3.12 -</span><br></pre></td></tr></table></figure>

<p>如果安装特定版本，可以使用<code>--version</code>选项或者使用<code>POETRY_VERSION</code>环境变量，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sSL https://install.python-poetry.org | python3.12 - --version=1.2.0</span><br><span class="line">$ curl -sSL https://install.python-poetry.org | POETRY_VERSION=1.2.0 python3.12 -</span><br></pre></td></tr></table></figure>

<h2 id="从git仓库安装"><a href="#从git仓库安装" class="headerlink" title="从git仓库安装"></a>从git仓库安装</h2><p>还可以使用<code>git</code>从git仓库安装，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sSL https://install.python-poetry.org | python3.12 - --git https://github.com/python-poetry/poetry.git@master</span><br></pre></td></tr></table></figure>

<h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p>使用<code>self update</code>命令可以更新poetry，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ poetry self update</span><br><span class="line">Updating Poetry version ...</span><br><span class="line"></span><br><span class="line">Using version ^1.7.1 <span class="keyword">for</span> poetry</span><br><span class="line"></span><br><span class="line">Updating dependencies</span><br><span class="line">Resolving dependencies... (270.5s)</span><br><span class="line"></span><br><span class="line">No dependencies to install or update</span><br><span class="line"></span><br><span class="line">Writing lock file</span><br></pre></td></tr></table></figure>

<p>如果需要更新到预发行版本，可以使用<code>--preview</code>选项，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry self update --preview</span><br></pre></td></tr></table></figure>

<p>如果需要更新到特定版本，可以使用<code>--version</code>选项，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry self update --version=1.2.0</span><br></pre></td></tr></table></figure>

<h2 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h2><p>如果不想要poetry了，可以使用<code>--uninstall</code>选项或者使用<code>POETRY_UNINSTALL</code>环境变量，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sSL https://install.python-poetry.org | python3.12 - --uninstall</span><br><span class="line">$ curl -sSL https://install.python-poetry.org | POETRY_UNINSTALL=1 python3.12 -</span><br></pre></td></tr></table></figure>

<h2 id="自动补全"><a href="#自动补全" class="headerlink" title="自动补全"></a>自动补全</h2><p>poetry 支持为Bash、Fish和Zsh提供自动补全，获取更详细的信息可以使用<code>poetry help completions</code>命令，这里只说Bash的自动补全。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成自动补全脚本</span></span><br><span class="line">$ vim ~/.profile</span><br><span class="line">......</span><br><span class="line"><span class="built_in">source</span> &lt;(poetry completions bash)</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">source</span> ~/.profile</span><br></pre></td></tr></table></figure>

<h1 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h1><p>这里我们使用poetry创建一个fastapi的项目，然后添加依赖，最后打包发布。</p>
<p>fastapi是一个python的web库，可以用来快速构建web服务，使用starlette作为web框架，使用pydantic作为数据验证框架，使用uvicorn作为web服务器。</p>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>我们先创建一个叫做<code>thousand-sunny</code>的项目，使用<code>poetry new</code>命令可以创建一个新的项目，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ poetry new thousand-sunny</span><br><span class="line">Created package thousand-sunny <span class="keyword">in</span> thousand-sunny</span><br></pre></td></tr></table></figure>

<p>创建的项目结构如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ tree thousand-sunny/</span><br><span class="line">thousand-sunny/</span><br><span class="line">├── README.md</span><br><span class="line">├── pyproject.toml</span><br><span class="line">├── tests</span><br><span class="line">│   └── __init__.py</span><br><span class="line">└── thousand_sunny</span><br><span class="line">    └── __init__.py</span><br><span class="line"></span><br><span class="line">2 directories, 4 files</span><br></pre></td></tr></table></figure>

<p>其中<code>pyproject.toml</code>是项目的配置文件，<code>thousand_sunny</code>是项目的python包，<code>tests</code>是项目的测试目录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> thousand-sunny/</span><br><span class="line">$ <span class="built_in">cat</span> README.md</span><br><span class="line">$ <span class="built_in">cat</span> pyproject.toml</span><br><span class="line">[tool.poetry]</span><br><span class="line">name = <span class="string">&quot;thousand-sunny&quot;</span></span><br><span class="line">version = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line">description = <span class="string">&quot;&quot;</span></span><br><span class="line">authors = [<span class="string">&quot;Your Name &lt;you@example.com&gt;&quot;</span>]</span><br><span class="line">readme = <span class="string">&quot;README.md&quot;</span></span><br><span class="line"></span><br><span class="line">[tool.poetry.dependencies]</span><br><span class="line">python = <span class="string">&quot;^3.12&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[build-system]</span><br><span class="line">requires = [<span class="string">&quot;poetry-core&quot;</span>]</span><br><span class="line">build-backend = <span class="string">&quot;poetry.core.masonry.api&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>tool.poetry.name</code>是项目的名称</li>
<li><code>tool.poetry.version</code>是项目的版本</li>
<li><code>tool.poetry.description</code>是项目的描述</li>
<li><code>tool.poetry.authors</code>是项目的作者</li>
<li><code>tool.poetry.readme</code>是项目的README文件</li>
<li><code>tool.poetry.dependencies</code>是项目的依赖<ul>
<li><code>python</code>是python的版本，poetry要求显示的指定python的版本</li>
</ul>
</li>
<li><code>build-system</code>是项目的构建系统。</li>
</ul>
<h2 id="已存在项目初始化"><a href="#已存在项目初始化" class="headerlink" title="已存在项目初始化"></a>已存在项目初始化</h2><p>和git类似，如果已经有了一个项目，可以使用<code>poetry init</code>命令初始化，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> going-merry</span><br><span class="line">$ <span class="built_in">cd</span> going-merry/</span><br><span class="line">$ poetry init</span><br><span class="line">This <span class="built_in">command</span> will guide you through creating your pyproject.toml config.</span><br><span class="line"></span><br><span class="line">Package name [going-merry]:</span><br><span class="line">Version [0.1.0]:</span><br><span class="line">Description []:</span><br><span class="line">Author [None, n to skip]:  n</span><br><span class="line">License []:</span><br><span class="line">Compatible Python versions [^3.12]:</span><br><span class="line"></span><br><span class="line">Would you like to define your main dependencies interactively? (<span class="built_in">yes</span>/no) [<span class="built_in">yes</span>]</span><br><span class="line">You can specify a package <span class="keyword">in</span> the following forms:</span><br><span class="line">  - A single name (requests): this will search <span class="keyword">for</span> matches on PyPI</span><br><span class="line">  - A name and a constraint (requests@^2.23.0)</span><br><span class="line">  - A git url (git+https://github.com/python-poetry/poetry.git)</span><br><span class="line">  - A git url with a revision (git+https://github.com/python-poetry/poetry.git<span class="comment">#develop)</span></span><br><span class="line">  - A file path (../my-package/my-package.whl)</span><br><span class="line">  - A directory (../my-package/)</span><br><span class="line">  - A url (https://example.com/packages/my-package-0.1.0.tar.gz)</span><br><span class="line"></span><br><span class="line">Package to add or search <span class="keyword">for</span> (leave blank to skip):</span><br><span class="line"></span><br><span class="line">Would you like to define your development dependencies interactively? (<span class="built_in">yes</span>/no) [<span class="built_in">yes</span>]</span><br><span class="line">Package to add or search <span class="keyword">for</span> (leave blank to skip):</span><br><span class="line"></span><br><span class="line">Generated file</span><br><span class="line"></span><br><span class="line">[tool.poetry]</span><br><span class="line">name = <span class="string">&quot;going-merry&quot;</span></span><br><span class="line">version = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line">description = <span class="string">&quot;&quot;</span></span><br><span class="line">authors = [<span class="string">&quot;Your Name &lt;you@example.com&gt;&quot;</span>]</span><br><span class="line">readme = <span class="string">&quot;README.md&quot;</span></span><br><span class="line"></span><br><span class="line">[tool.poetry.dependencies]</span><br><span class="line">python = <span class="string">&quot;^3.12&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[build-system]</span><br><span class="line">requires = [<span class="string">&quot;poetry-core&quot;</span>]</span><br><span class="line">build-backend = <span class="string">&quot;poetry.core.masonry.api&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Do you confirm generation? (<span class="built_in">yes</span>/no) [<span class="built_in">yes</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前目录</span></span><br><span class="line">$ tree .</span><br><span class="line">.</span><br><span class="line">└── pyproject.toml</span><br><span class="line"></span><br><span class="line">0 directories, 1 file</span><br></pre></td></tr></table></figure>

<h2 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h2><p>如果向项目中添加依赖，可以使用两种方式，一种是直接编辑<code>pyproject.toml</code>文件，另一种是使用<code>poetry add</code>命令。</p>
<h3 id="直接编辑pyproject-toml"><a href="#直接编辑pyproject-toml" class="headerlink" title="直接编辑pyproject.toml"></a>直接编辑pyproject.toml</h3><p>编辑<code>pyproject.toml</code>文件，添加依赖，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ vim pyproject.toml</span><br><span class="line">......</span><br><span class="line">[tool.poetry.dependencies]</span><br><span class="line">python = <span class="string">&quot;^3.12&quot;</span></span><br><span class="line">fastapi = <span class="string">&quot;^0.70.0&quot;</span></span><br><span class="line">uvicorn = <span class="string">&quot;^0.15.0&quot;</span></span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>可以看到，依赖项需要进行包名称和版本的指定，版本可以使用<code>^</code>、<code>~</code>、<code>&gt;</code>、<code>&gt;=</code>、<code>&lt;</code>、<code>&lt;=</code>等符号，也可以使用<code>*</code>表示任意版本。</p>
<p>poetry会根据<code>tool.poetry.dependencies</code>中的依赖项，在<code>tool.poetry.source</code>中的源或者PyPI中查找、安装。</p>
<h3 id="使用poetry-add命令"><a href="#使用poetry-add命令" class="headerlink" title="使用poetry add命令"></a>使用poetry add命令</h3><p>使用<code>poetry add</code>命令也可以添加依赖，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加fastapi依赖</span></span><br><span class="line">$ poetry add fastapi</span><br><span class="line">Creating virtualenv thousand-sunny-mMs6oAD9-py3.12 <span class="keyword">in</span> /home/ubuntu/.cache/pypoetry/virtualenvs</span><br><span class="line">Using version ^0.108.0 <span class="keyword">for</span> fastapi</span><br><span class="line"></span><br><span class="line">Updating dependencies</span><br><span class="line">Resolving dependencies... (3.3s)</span><br><span class="line"></span><br><span class="line">Package operations: 9 installs, 0 updates, 0 removals</span><br><span class="line"></span><br><span class="line">  • Installing idna (3.6)</span><br><span class="line">  • Installing sniffio (1.3.0)</span><br><span class="line">  • Installing typing-extensions (4.9.0)</span><br><span class="line">  • Installing annotated-types (0.6.0)</span><br><span class="line">  • Installing anyio (4.2.0)</span><br><span class="line">  • Installing pydantic-core (2.14.6)</span><br><span class="line">  • Installing pydantic (2.5.3)</span><br><span class="line">  • Installing starlette (0.32.0.post1)</span><br><span class="line">  • Installing fastapi (0.108.0)</span><br><span class="line"></span><br><span class="line">Writing lock file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加uvicorn依赖</span></span><br><span class="line">$ poetry add <span class="string">&quot;uvicorn[standard]&quot;</span></span><br><span class="line">Using version ^0.25.0 <span class="keyword">for</span> uvicorn</span><br><span class="line"></span><br><span class="line">Updating dependencies</span><br><span class="line">Resolving dependencies... (3.1s)</span><br><span class="line"></span><br><span class="line">Package operations: 9 installs, 0 updates, 0 removals</span><br><span class="line"></span><br><span class="line">  • Installing click (8.1.7)</span><br><span class="line">  • Installing h11 (0.14.0)</span><br><span class="line">  • Installing httptools (0.6.1)</span><br><span class="line">  • Installing python-dotenv (1.0.0)</span><br><span class="line">  • Installing pyyaml (6.0.1)</span><br><span class="line">  • Installing uvloop (0.19.0)</span><br><span class="line">  • Installing watchfiles (0.21.0)</span><br><span class="line">  • Installing websockets (12.0)</span><br><span class="line">  • Installing uvicorn (0.25.0)</span><br><span class="line"></span><br><span class="line">Writing lock file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加开发依赖</span></span><br><span class="line">$ poetry add pytest -G dev</span><br><span class="line">Using version ^7.4.4 <span class="keyword">for</span> pytest</span><br><span class="line"></span><br><span class="line">Updating dependencies</span><br><span class="line">Resolving dependencies... (2.9s)</span><br><span class="line"></span><br><span class="line">Package operations: 4 installs, 0 updates, 0 removals</span><br><span class="line"></span><br><span class="line">  • Installing iniconfig (2.0.0)</span><br><span class="line">  • Installing packaging (23.2)</span><br><span class="line">  • Installing pluggy (1.3.0)</span><br><span class="line">  • Installing pytest (7.4.4)</span><br><span class="line"></span><br><span class="line">Writing lock file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看pyproject.toml文件</span></span><br><span class="line">$ <span class="built_in">cat</span> pyproject.toml</span><br><span class="line">[tool.poetry]</span><br><span class="line">name = <span class="string">&quot;thousand-sunny&quot;</span></span><br><span class="line">version = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line">description = <span class="string">&quot;&quot;</span></span><br><span class="line">authors = [<span class="string">&quot;Your Name &lt;you@example.com&gt;&quot;</span>]</span><br><span class="line">readme = <span class="string">&quot;README.md&quot;</span></span><br><span class="line"></span><br><span class="line">[tool.poetry.dependencies]</span><br><span class="line">python = <span class="string">&quot;^3.12&quot;</span></span><br><span class="line">fastapi = <span class="string">&quot;^0.108.0&quot;</span></span><br><span class="line">uvicorn = &#123;extras = [<span class="string">&quot;standard&quot;</span>], version = <span class="string">&quot;^0.25.0&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">[tool.poetry.group.dev.dependencies]</span><br><span class="line">pytest = <span class="string">&quot;^7.4.4&quot;</span></span><br><span class="line"></span><br><span class="line">[build-system]</span><br><span class="line">requires = [<span class="string">&quot;poetry-core&quot;</span>]</span><br><span class="line">build-backend = <span class="string">&quot;poetry.core.masonry.api&quot;</span></span><br></pre></td></tr></table></figure>

<p>可以看到，<code>poetry add</code>命令会自动更新<code>pyproject.toml</code>文件。同时，安装过后会创建一个<code>poetry.lock</code>文件，用来锁定依赖的版本。</p>
<h2 id="使用虚拟环境"><a href="#使用虚拟环境" class="headerlink" title="使用虚拟环境"></a>使用虚拟环境</h2><p>poetry会为每个项目创建一个虚拟环境，这样可以避免依赖冲突，也可以避免污染全局环境。</p>
<p>默认情况下，poetry会在<code>&#123;cache-dir&#125;/virtualenvs</code>中创建虚拟环境，可以通过修改<code>cache-dir</code>来修改虚拟环境的位置。另外，可以使用<code>virtualenvs.in-project</code>来指定虚拟环境是否在项目中，如果设置为<code>true</code>，则会在项目的<code>.venv</code>目录中创建虚拟环境。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ poetry config --list</span><br><span class="line">cache-dir = <span class="string">&quot;/home/ubuntu/.cache/pypoetry&quot;</span></span><br><span class="line">experimental.system-git-client = <span class="literal">false</span></span><br><span class="line">installer.max-workers = null</span><br><span class="line">installer.modern-installation = <span class="literal">true</span></span><br><span class="line">installer.no-binary = null</span><br><span class="line">installer.parallel = <span class="literal">true</span></span><br><span class="line">virtualenvs.create = <span class="literal">true</span></span><br><span class="line">virtualenvs.in-project = null</span><br><span class="line">virtualenvs.options.always-copy = <span class="literal">false</span></span><br><span class="line">virtualenvs.options.no-pip = <span class="literal">false</span></span><br><span class="line">virtualenvs.options.no-setuptools = <span class="literal">false</span></span><br><span class="line">virtualenvs.options.system-site-packages = <span class="literal">false</span></span><br><span class="line">virtualenvs.path = <span class="string">&quot;&#123;cache-dir&#125;/virtualenvs&quot;</span>  <span class="comment"># /home/ubuntu/.cache/pypoetry/virtualenvs</span></span><br><span class="line">virtualenvs.prefer-active-python = <span class="literal">false</span></span><br><span class="line">virtualenvs.prompt = <span class="string">&quot;&#123;project_name&#125;-py&#123;python_version&#125;&quot;</span></span><br><span class="line">warnings.export = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>可以看到，<code>virtualenvs.create</code>默认为<code>true</code>，<code>virtualenvs.in-project</code>默认为<code>null</code>，<code>virtualenvs.path</code>默认为<code>&#123;cache-dir&#125;/virtualenvs</code>。</p>
<p>要想运行Poetry创建的虚拟环境，可以有多种方式。</p>
<h3 id="run命令"><a href="#run命令" class="headerlink" title="run命令"></a>run命令</h3><p>使用<code>poetry run</code>命令可以在虚拟环境中运行命令，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ poetry run python --version</span><br><span class="line">Python 3.12.1</span><br><span class="line"></span><br><span class="line">$ vim main.py</span><br><span class="line">from fastapi import FastAPI</span><br><span class="line"></span><br><span class="line">app = FastAPI()</span><br><span class="line"></span><br><span class="line">@app.get(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">async def read_root():</span><br><span class="line">    <span class="built_in">return</span> &#123;<span class="string">&quot;Hello&quot;</span>: <span class="string">&quot;World&quot;</span>&#125;</span><br><span class="line">$ poetry run uvicorn main:app --reload</span><br></pre></td></tr></table></figure>

<h3 id="shell命令"><a href="#shell命令" class="headerlink" title="shell命令"></a>shell命令</h3><p>激活虚拟环境最简单的方式是使用<code>poetry shell</code>命令，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ poetry shell</span><br><span class="line">Spawning shell within /home/ubuntu/.cache/pypoetry/virtualenvs/thousand-sunny-mMs6oAD9-py3.12</span><br><span class="line"></span><br><span class="line">$ python --version</span><br><span class="line">Python 3.12.1</span><br></pre></td></tr></table></figure>

<p>如果要退出虚拟环境并退出shell，可以使用<code>exit</code>命令，如果只是退出虚拟环境，可以使用<code>deactivate</code>命令。</p>
<p>如果想要防止进入虚拟环境修改shell提示符，可以使用环境变量<code>VIRTUAL_ENV_DISABLE_PROMPT=1</code>。</p>
<p>如果不想要创建新shell，可以手动激活虚拟环境，激活命令为：<code>source &#123;path_to_venv&#125;-&#123;python_version&#125;/bin/activate</code>，停用命令相似，为：<code>deactivate</code>。获取虚拟环境的路径可以使用<code>poetry env info --path</code>命令</p>
<p>也可以使用一行命令<code>source &quot;$(poetry env info --path)/bin/activate&quot;</code>激活虚拟环境。</p>
<h2 id="为项目安装依赖"><a href="#为项目安装依赖" class="headerlink" title="为项目安装依赖"></a>为项目安装依赖</h2><h3 id="安装全部依赖"><a href="#安装全部依赖" class="headerlink" title="安装全部依赖"></a>安装全部依赖</h3><p>如果一个已经存在的项目，它是通过poetry创建的，那么可以使用<code>poetry install</code>命令安装依赖，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry install</span><br></pre></td></tr></table></figure>

<p>运行此命令的时候有两种情况：</p>
<ol>
<li><p>poetry.lock文件不存在</p>
<ul>
<li>如果您以前从未运行过该命令并且也不存在任何poetry.lock文件，Poetry只会解析pyproject.toml文件中列出的所有依赖项并下载其文件的最新版本。</li>
<li>当Poetry完成安装后，它将下载的所有包及其确切版本写入文件中poetry.lock，从而将项目锁定到这些特定版本。</li>
<li>Poetry建议应该将该poetry.lock文件提交到项目存储库，以便所有本项目的人员都被锁定到相同版本的依赖项。</li>
</ul>
</li>
<li><p>poetry.lock文件存在</p>
<ul>
<li>如果您以前运行过该命令并且存在poetry.lock文件，Poetry将使用该文件中列出的确切版本来安装依赖项，尽管依赖有可能不是最新版本。</li>
</ul>
</li>
</ol>
<h3 id="仅安装依赖"><a href="#仅安装依赖" class="headerlink" title="仅安装依赖"></a>仅安装依赖</h3><p>当你当前的项目是一个库，但是又不想安装项目本身，只想安装依赖时，可以使用<code>poetry install --no-root</code>命令，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry install --no-root</span><br></pre></td></tr></table></figure>

<h3 id="仅安装生产依赖"><a href="#仅安装生产依赖" class="headerlink" title="仅安装生产依赖"></a>仅安装生产依赖</h3><p>如果只想安装生产依赖，可以使用<code>--no-dev</code>选项，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry install --no-dev</span><br></pre></td></tr></table></figure>

<h3 id="仅安装开发依赖"><a href="#仅安装开发依赖" class="headerlink" title="仅安装开发依赖"></a>仅安装开发依赖</h3><p>如果只想安装开发依赖，可以使用<code>--dev</code>选项，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry install --dev</span><br></pre></td></tr></table></figure>

<h3 id="仅安装指定依赖"><a href="#仅安装指定依赖" class="headerlink" title="仅安装指定依赖"></a>仅安装指定依赖</h3><p>如果只想安装指定依赖，可以使用<code>--package</code>选项，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry install --package requests</span><br></pre></td></tr></table></figure>

<h2 id="依赖更新"><a href="#依赖更新" class="headerlink" title="依赖更新"></a>依赖更新</h2><p>如果想要更新依赖，可以使用<code>poetry update</code>命令，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry update</span><br></pre></td></tr></table></figure>

<p>这相当于删除<code>poetry.lock</code>文件并重新运行<code>poetry install</code>命令。</p>
<h2 id="删除依赖"><a href="#删除依赖" class="headerlink" title="删除依赖"></a>删除依赖</h2><p>如果想要删除依赖，则只需要执行命令<code>remove</code>，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry remove requests</span><br></pre></td></tr></table></figure>

<h2 id="依赖导出为其他格式"><a href="#依赖导出为其他格式" class="headerlink" title="依赖导出为其他格式"></a>依赖导出为其他格式</h2><p>如果想用其他格式的文件管理依赖，poetry提供了命令可以直接导出。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">poetry <span class="built_in">export</span> -f requirements.txt --output requirements.txt</span></span><br></pre></td></tr></table></figure>

<p>命令的参数如下：</p>
<ul>
<li><code>-f</code>或<code>--format</code>：导出的文件格式，默认为<code>requirements.txt</code>，目前仅支持<code>requirements.txt</code>和<code>constraints.txt</code>两种格式。</li>
<li><code>--output</code>：导出的文件路径，默认为<code>stdout</code>。</li>
<li><code>--without-hashes</code>：不导出哈希值，默认为<code>false</code>。</li>
<li><code>--with-credentials</code>：导出私有仓库的凭证，默认为<code>false</code>。</li>
<li><code>--without</code>：不导出指定的依赖组</li>
<li><code>--with</code>：导出指定的依赖组</li>
</ul>
<h2 id="添加仓库源"><a href="#添加仓库源" class="headerlink" title="添加仓库源"></a>添加仓库源</h2><p>poetry默认使用PyPI作为仓库源，如果想要添加其他仓库源，可以使用<code>source add</code>命令，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry <span class="built_in">source</span> add aliyun https://mirrors.aliyun.com/pypi/simple --priority default</span><br></pre></td></tr></table></figure>

<p><code>priority</code>参数表示优先级，可接受的值为<code>default</code>、<code>secondary</code>、<code>supplementary</code>和<code>explicit</code>。</p>
<p>如果删除源可以使用<code>source remove</code>命令，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry <span class="built_in">source</span> remove aliyun</span><br></pre></td></tr></table></figure>

<h2 id="添加poetry自身的依赖"><a href="#添加poetry自身的依赖" class="headerlink" title="添加poetry自身的依赖"></a>添加poetry自身的依赖</h2><p>poetry自身也可以添加依赖和插件，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry self add poetry-plugin-export</span><br></pre></td></tr></table></figure>

<h1 id="依赖关系管理"><a href="#依赖关系管理" class="headerlink" title="依赖关系管理"></a>依赖关系管理</h1><h2 id="依赖组"><a href="#依赖组" class="headerlink" title="依赖组"></a>依赖组</h2><p>Poetry提供了一种按组安装依赖关系的方法。例如，您可能具有仅测试项目或构建文档所需的依赖项。</p>
<p>要声明新的依赖项组，可以使用一个<code>tool.poetry.group.&lt;group&gt;</code>部分，其中<code>&lt;group&gt;</code>是依赖项组的名称（例如，<code>test</code>）：</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.poetry.group.test]</span>  <span class="comment"># This part can be left out</span></span><br><span class="line"></span><br><span class="line"><span class="section">[tool.poetry.group.test.dependencies]</span></span><br><span class="line"><span class="attr">pytest</span> = <span class="string">&quot;^6.0.0&quot;</span></span><br><span class="line"><span class="attr">pytest-mock</span> = <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>所有依赖项必须跨组相互兼容，因为无论安装是否需要它们，它们都会被解析。</li>
<li><code>tool.poetry.dependencies</code>隐式组<code>main</code>的一部分</li>
<li>自poetry 1.2.0以后，<code>tool.poetry.dev-dependencies</code>已经修改为<code>tool.poetry.group.dev.dependencies</code>，<code>tool.poetry.dev-dependencies</code>仍然可以使用，但是会有警告。</li>
</ul>
</blockquote>
<h2 id="可选组"><a href="#可选组" class="headerlink" title="可选组"></a>可选组</h2><p>Poetry还提供了一种安装可选依赖项的方法。例如，您可能具有一个依赖项，它只能在某些平台上使用，或者您可能具有一个依赖项，它只能在某些Python版本上使用。</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.poetry.group.docs]</span></span><br><span class="line"><span class="attr">optional</span> = <span class="literal">true</span></span><br><span class="line">    </span><br><span class="line"><span class="section">[tool.poetry.group.docs.dependencies]</span></span><br><span class="line"><span class="attr">mkdocs</span> = <span class="string">&quot;*&quot;</span></span><br></pre></td></tr></table></figure>

<p>使用安装命令时，可以使用<code>--with</code>选项来安装可选组，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry install --with docs</span><br></pre></td></tr></table></figure>

<h2 id="使用命令向组内添加依赖"><a href="#使用命令向组内添加依赖" class="headerlink" title="使用命令向组内添加依赖"></a>使用命令向组内添加依赖</h2><p>通过使用<code>--group(-G)</code>选项，可以将依赖项添加到特定的组中，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry add pytest -G <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p>如果该组不存在，会自动创建。</p>
<h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><p>默认情况下，Poetry会安装所有非可选组的依赖项。</p>
<p>如果想要排除几个组，可以使用<code>--without</code>选项，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry install --without <span class="built_in">test</span>,docs</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果<code>--without</code>和<code>--with</code>选项同时使用，<code>--without</code>选项会优先<code>--with</code>选项。</p>
</blockquote>
<p>如果只是想安装特定的依赖组，可以使用<code>--only</code>选项，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry install --only <span class="built_in">test</span>,docs</span><br></pre></td></tr></table></figure>

<h1 id="打包发布"><a href="#打包发布" class="headerlink" title="打包发布"></a>打包发布</h1><h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><p>实际发布库之前需要对项目进行打包，使用<code>poetry build</code>命令可以打包项目，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ poetry build</span><br><span class="line">$ poetry build</span><br><span class="line">Building thousand-sunny (0.1.0)</span><br><span class="line">  - Building sdist</span><br><span class="line">fatal: not a git repository (or any of the parent directories): .git</span><br><span class="line">  - Built thousand_sunny-0.1.0.tar.gz</span><br><span class="line">  - Building wheel</span><br><span class="line">fatal: not a git repository (or any of the parent directories): .git</span><br><span class="line">  - Built thousand_sunny-0.1.0-py3-none-any.whl</span><br></pre></td></tr></table></figure>

<p>打包完成后，会在<code>dist</code>目录下生成打包文件，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ tree dist/</span><br><span class="line">dist/</span><br><span class="line">├── thousand_sunny-0.1.0-py3-none-any.whl</span><br><span class="line">└── thousand_sunny-0.1.0.tar.gz</span><br><span class="line"></span><br><span class="line">0 directories, 2 files</span><br></pre></td></tr></table></figure>

<p>此命令将以两种不同的格式打包您的库：<code>sdist</code>这是源格式，<code>wheel</code>这是<code>compiled</code>包。</p>
<p>Poetry 在构建包时会自动包含一些元数据。</p>
<p>构建<code>wheel</code>时，以下文件会放到.dist-info目录中：</p>
<ul>
<li><code>LICENSE</code></li>
<li><code>LICENSE.*</code></li>
<li><code>COPYING</code></li>
<li><code>COPYING.*</code></li>
<li><code>LICENSES/**</code></li>
</ul>
<p>构建<code>sdist</code>时，根文件夹中将包含以下文件：</p>
<ul>
<li><code>LICENSE*</code></li>
</ul>
<p>构建完成后，就可以发布库了。</p>
<h2 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h2><p>默认情况下，Poetry会将库发布到PyPI，但是您可以配置它以发布到其他地方。</p>
<p>使用poetry发布十分简单，只需要使用<code>poetry publish</code>命令即可，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry publish</span><br></pre></td></tr></table></figure>

<p>注意：发布的包的名称和版本是通过<code>pyproject.toml</code>文件中的<code>name</code>和<code>version</code>字段来确定的。同时，<code>publish</code>命令不会自动执行<code>build</code>命令，如果想要一起执行，可以添加<code>--build</code>选项</p>
<p>但是，很多时候需要使用到私有仓库，这时候就需要配置私有仓库，然后指定发布到私有仓库。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">poetry publish -r my-repository</span></span><br></pre></td></tr></table></figure>

<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="本地配置"><a href="#本地配置" class="headerlink" title="本地配置"></a>本地配置</h2><p>有时候需要在本地配置一些内容，例如，配置仓库源、配置虚拟环境的位置等。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ poetry config virtualenvs.create <span class="literal">true</span> --<span class="built_in">local</span></span><br><span class="line">$ poetry config virtualenvs.in-project <span class="literal">true</span> --<span class="built_in">local</span></span><br></pre></td></tr></table></figure>

<p>此时，会在项目的根目录下生成一个<code>poetry.toml</code>文件，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> poetry.toml</span><br><span class="line">[virtualenvs]</span><br><span class="line">create = <span class="literal">true</span></span><br><span class="line">in-project = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><p>有时，特别是在将Poetry与CI工具一起使用时，使用环境变量更容易，而不必执行配置命令。</p>
<p>Poetry支持这一点，任何设置都可以通过使用环境变量来设置。</p>
<p>环境变量必须以设置<code>POETRY_</code>的大写名称为前缀，并由下划线替换点和破折号组成。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> POETRY_VIRTUALENVS_PATH=/path/to/virtualenvs/directory</span><br></pre></td></tr></table></figure>

<p>这也适用于secret设置，例如凭据：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export POETRY_HTTP_BASIC_MY_REPOSITORY_PASSWORD=secret</span><br></pre></td></tr></table></figure>

<h2 id="可用配置"><a href="#可用配置" class="headerlink" title="可用配置"></a>可用配置</h2><p>Poetry支持的配置可以参考<a target="_blank" rel="external nofollow noopener noreferrer" href="https://python-poetry.org/docs/configuration/#available-settings">官方文档</a></p>
<h1 id="管理环境"><a href="#管理环境" class="headerlink" title="管理环境"></a>管理环境</h1><p>poeotry提供了一些命令来管理环境，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 列出所有的虚拟环境</span></span><br><span class="line">$ poetry <span class="built_in">env</span> list</span><br><span class="line"><span class="comment"># 列出当前虚拟环境信息</span></span><br><span class="line">$ poetry <span class="built_in">env</span> info</span><br><span class="line"><span class="comment"># 删除虚拟环境</span></span><br><span class="line">$ poetry <span class="built_in">env</span> remove test-a test-b test-c</span><br></pre></td></tr></table></figure>

<h2 id="指定python版本"><a href="#指定python版本" class="headerlink" title="指定python版本"></a>指定python版本</h2><p>使用poetry可以直接指定你需要的python版本，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry <span class="built_in">env</span> use /usr/bin/python3.12</span><br></pre></td></tr></table></figure>

<p>如果要禁用虚拟环境，可以使用<code>system</code>选项查找默认行为，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ poetry <span class="built_in">env</span> use system</span><br></pre></td></tr></table></figure>

<h2 id="显示环境信息"><a href="#显示环境信息" class="headerlink" title="显示环境信息"></a>显示环境信息</h2><p>使用<code>info</code>命令可以显示当前虚拟环境的信息，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ poetry <span class="built_in">env</span> info</span><br><span class="line"></span><br><span class="line">Virtualenv</span><br><span class="line">Python:         3.12.1</span><br><span class="line">Implementation: CPython</span><br><span class="line">Path:           /home/ubuntu/.cache/pypoetry/virtualenvs/thousand-sunny-mMs6oAD9-py3.12</span><br><span class="line">Executable:     /home/ubuntu/.cache/pypoetry/virtualenvs/thousand-sunny-mMs6oAD9-py3.12/bin/python</span><br><span class="line">Valid:          True</span><br><span class="line"></span><br><span class="line">System</span><br><span class="line">Platform:   linux</span><br><span class="line">OS:         posix</span><br><span class="line">Python:     3.12.1</span><br><span class="line">Path:       /opt/python312</span><br><span class="line">Executable: /opt/python312/bin/python3.12</span><br></pre></td></tr></table></figure>

<p>如果只想知道路径信息，可以使用<code>--path</code>选项，入股执行知道可执行文件的路径，可以使用<code>--executable</code>选项。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">poetry <span class="built_in">env</span> info --path</span></span><br><span class="line">/home/ubuntu/.cache/pypoetry/virtualenvs/thousand-sunny-mMs6oAD9-py3.12</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">poetry <span class="built_in">env</span> info --executable</span></span><br><span class="line">/home/ubuntu/.cache/pypoetry/virtualenvs/thousand-sunny-mMs6oAD9-py3.12/bin/python</span><br></pre></td></tr></table></figure>

<h1 id="依赖规范"><a href="#依赖规范" class="headerlink" title="依赖规范"></a>依赖规范</h1><p>项目的依赖项可以以各种形式指定，这取决于依赖项的类型以及安装它可能需要的可选约束。</p>
<p>具体的显示可以参考<a target="_blank" rel="external nofollow noopener noreferrer" href="https://python-poetry.org/docs/dependency-specification/">官方文档 Dependency specification</a></p>
<h1 id="pyproject-toml-文件"><a href="#pyproject-toml-文件" class="headerlink" title="pyproject.toml 文件"></a>pyproject.toml 文件</h1><p><code>pyproject.toml</code>文件是Poetry项目的核心，它包含了项目的元数据和依赖项。</p>
<h2 id="name"><a href="#name" class="headerlink" title="name"></a>name</h2><p><code>name</code>字段是项目的名称，必需项。</p>
<h2 id="version"><a href="#version" class="headerlink" title="version"></a>version</h2><p><code>version</code>字段是项目的版本，必需项。</p>
<h2 id="description"><a href="#description" class="headerlink" title="description"></a>description</h2><p><code>description</code>字段是项目的简短描述，必需项。</p>
<h2 id="license"><a href="#license" class="headerlink" title="license"></a>license</h2><p><code>license</code>字段是项目的许可证，可选项。</p>
<p>常见的许可证有以下几种：</p>
<ul>
<li>Apache-2.0</li>
<li>BSD-2-Clause</li>
<li>BSD-3-Clause</li>
<li>BSD-4-Clause</li>
<li>GPL-2.0-only</li>
<li>GPL-2.0-or-later</li>
<li>GPL-3.0-only</li>
<li>GPL-3.0-or-later</li>
<li>LGPL-2.1-only</li>
<li>LGPL-2.1-or-later</li>
<li>LGPL-3.0-only</li>
<li>LGPL-3.0-or-later</li>
<li>MIT</li>
</ul>
<p>强烈建议添加，更多的许可证可以参考<a target="_blank" rel="external nofollow noopener noreferrer" href="https://spdx.org/licenses/">SPDX 开源许可证注册表</a></p>
<blockquote>
<p>如果项目是专有的并且不使用特定许可证，则可以将此值设置为<code>Proprietary</code>。</p>
</blockquote>
<h2 id="authors"><a href="#authors" class="headerlink" title="authors"></a>authors</h2><p><code>authors</code>字段是项目的作者，必需项。</p>
<p>是作者列表，应至少包含一名作者。作者必须采用<code>name &lt;email&gt;</code>的形式。</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">authors</span> = [</span><br><span class="line">    <span class="string">&quot;Sébastien Eustace &lt;sebastien@eustace.io&gt;&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="maintainers"><a href="#maintainers" class="headerlink" title="maintainers"></a>maintainers</h2><p><code>maintainers</code>字段是项目的维护者，可选项。</p>
<p>这是维护者列表，应与作者区分开来。维护者可能包含电子邮件并采用表格形式<code>name &lt;email&gt;</code>。</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">maintainers</span> = [</span><br><span class="line">    <span class="string">&quot;John Smith &lt;johnsmith@example.org&gt;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Jane Smith &lt;janesmith@example.org&gt;&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="readme"><a href="#readme" class="headerlink" title="readme"></a>readme</h2><p>包的<code>readme</code>文件的路径，可选项。路径相对于<code>pyproject.toml</code>文件。</p>
<h2 id="homepage"><a href="#homepage" class="headerlink" title="homepage"></a>homepage</h2><p>项目的主页，可选项。</p>
<h2 id="repository"><a href="#repository" class="headerlink" title="repository"></a>repository</h2><p>项目的仓库，可选项。</p>
<h2 id="classifiers"><a href="#classifiers" class="headerlink" title="classifiers"></a>classifiers</h2><p>描述该项目的<a target="_blank" rel="external nofollow noopener noreferrer" href="https://pypi.org/classifiers/">PyPI分类器</a>列表，可选项。</p>
<h2 id="packages"><a href="#packages" class="headerlink" title="packages"></a>packages</h2><p>最终发行版中包含的包和模块的列表，可选项。</p>
<h2 id="include-and-exclude"><a href="#include-and-exclude" class="headerlink" title="include and exclude"></a>include and exclude</h2><p>将包含在最终包中的模式列表。</p>
<h2 id="dependencies-and-dependency-groups"><a href="#dependencies-and-dependency-groups" class="headerlink" title="dependencies and dependency groups"></a>dependencies and dependency groups</h2><p>项目的依赖项，可选项。</p>
<h2 id="scripts"><a href="#scripts" class="headerlink" title="scripts"></a>scripts</h2><p>安装包时将安装的脚本或可执行文件，可选项。</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[tool.poetry.scripts]</span></span><br><span class="line"><span class="attr">my_package_cli</span> = <span class="string">&#x27;my_package.console:run&#x27;</span></span><br></pre></td></tr></table></figure>

<p>在这里，我们将声明<code>my_package_cli</code>安装脚本，该脚本将执行<code>my_package</code>包中模块<code>console</code>中的函数<code>run</code>。</p>
<p>添加完本地脚本后，可以使用<code>poetry run</code>或者<code>poetry install</code>命令安装脚本。</p>
<h2 id="extras"><a href="#extras" class="headerlink" title="extras"></a>extras</h2><p>额外的依赖项，可选项。</p>
<ul>
<li>可选依赖项，可增强包，但不是必需的</li>
<li>可选依赖项的集群。</li>
</ul>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/python-poetry/">python依赖管理和打包工具poetry</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">aaron</a></p>
        <p><span>发布时间:</span>2024-01-04, 19:54:49</p>
        <p><span>最后更新:</span>2024-01-05, 18:31:42</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/python-poetry/" title="python依赖管理和打包工具poetry">http://realtiger.github.io/python-poetry/</a>
            <span class="copy-path" data-clipboard-text="原文: http://realtiger.github.io/python-poetry/　　作者: aaron" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="external nofollow noopener noreferrer" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/python-private-pypi/">
                    python私有pypi库搭建
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/python-httpx/">
                    python第三方网络库httpx
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">安装</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%B8%B8%E5%AE%89%E8%A3%85"><span class="toc-number">1.1.</span> <span class="toc-text">正常安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E5%AE%89%E8%A3%85%E7%9B%AE%E5%BD%95"><span class="toc-number">1.2.</span> <span class="toc-text">指定安装目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E5%8F%91%E8%A1%8C%E7%89%88%E6%9C%AC"><span class="toc-number">1.3.</span> <span class="toc-text">指定发行版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8Egit%E4%BB%93%E5%BA%93%E5%AE%89%E8%A3%85"><span class="toc-number">1.4.</span> <span class="toc-text">从git仓库安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0"><span class="toc-number">1.5.</span> <span class="toc-text">更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BD"><span class="toc-number">1.6.</span> <span class="toc-text">卸载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8"><span class="toc-number">1.7.</span> <span class="toc-text">自动补全</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">基本用法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.1.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%B2%E5%AD%98%E5%9C%A8%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">2.2.</span> <span class="toc-text">已存在项目初始化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-number">2.3.</span> <span class="toc-text">添加依赖</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E7%BC%96%E8%BE%91pyproject-toml"><span class="toc-number">2.3.1.</span> <span class="toc-text">直接编辑pyproject.toml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8poetry-add%E5%91%BD%E4%BB%A4"><span class="toc-number">2.3.2.</span> <span class="toc-text">使用poetry add命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83"><span class="toc-number">2.4.</span> <span class="toc-text">使用虚拟环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#run%E5%91%BD%E4%BB%A4"><span class="toc-number">2.4.1.</span> <span class="toc-text">run命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shell%E5%91%BD%E4%BB%A4"><span class="toc-number">2.4.2.</span> <span class="toc-text">shell命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E9%A1%B9%E7%9B%AE%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="toc-number">2.5.</span> <span class="toc-text">为项目安装依赖</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%85%A8%E9%83%A8%E4%BE%9D%E8%B5%96"><span class="toc-number">2.5.1.</span> <span class="toc-text">安装全部依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%85%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="toc-number">2.5.2.</span> <span class="toc-text">仅安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%85%E5%AE%89%E8%A3%85%E7%94%9F%E4%BA%A7%E4%BE%9D%E8%B5%96"><span class="toc-number">2.5.3.</span> <span class="toc-text">仅安装生产依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%85%E5%AE%89%E8%A3%85%E5%BC%80%E5%8F%91%E4%BE%9D%E8%B5%96"><span class="toc-number">2.5.4.</span> <span class="toc-text">仅安装开发依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%85%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E4%BE%9D%E8%B5%96"><span class="toc-number">2.5.5.</span> <span class="toc-text">仅安装指定依赖</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E6%9B%B4%E6%96%B0"><span class="toc-number">2.6.</span> <span class="toc-text">依赖更新</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E4%BE%9D%E8%B5%96"><span class="toc-number">2.7.</span> <span class="toc-text">删除依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E5%AF%BC%E5%87%BA%E4%B8%BA%E5%85%B6%E4%BB%96%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.8.</span> <span class="toc-text">依赖导出为其他格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BB%93%E5%BA%93%E6%BA%90"><span class="toc-number">2.9.</span> <span class="toc-text">添加仓库源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0poetry%E8%87%AA%E8%BA%AB%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-number">2.10.</span> <span class="toc-text">添加poetry自身的依赖</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E7%AE%A1%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">依赖关系管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E7%BB%84"><span class="toc-number">3.1.</span> <span class="toc-text">依赖组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E9%80%89%E7%BB%84"><span class="toc-number">3.2.</span> <span class="toc-text">可选组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E5%90%91%E7%BB%84%E5%86%85%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-number">3.3.</span> <span class="toc-text">使用命令向组内添加依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="toc-number">3.4.</span> <span class="toc-text">安装依赖</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E5%8F%91%E5%B8%83"><span class="toc-number">4.</span> <span class="toc-text">打包发布</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85"><span class="toc-number">4.1.</span> <span class="toc-text">打包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E5%B8%83"><span class="toc-number">4.2.</span> <span class="toc-text">发布</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E9%85%8D%E7%BD%AE"><span class="toc-number">5.1.</span> <span class="toc-text">本地配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">5.2.</span> <span class="toc-text">环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E7%94%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">5.3.</span> <span class="toc-text">可用配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E7%8E%AF%E5%A2%83"><span class="toc-number">6.</span> <span class="toc-text">管理环境</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E5%AE%9Apython%E7%89%88%E6%9C%AC"><span class="toc-number">6.1.</span> <span class="toc-text">指定python版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E7%8E%AF%E5%A2%83%E4%BF%A1%E6%81%AF"><span class="toc-number">6.2.</span> <span class="toc-text">显示环境信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E8%A7%84%E8%8C%83"><span class="toc-number">7.</span> <span class="toc-text">依赖规范</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pyproject-toml-%E6%96%87%E4%BB%B6"><span class="toc-number">8.</span> <span class="toc-text">pyproject.toml 文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#name"><span class="toc-number">8.1.</span> <span class="toc-text">name</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#version"><span class="toc-number">8.2.</span> <span class="toc-text">version</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#description"><span class="toc-number">8.3.</span> <span class="toc-text">description</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#license"><span class="toc-number">8.4.</span> <span class="toc-text">license</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#authors"><span class="toc-number">8.5.</span> <span class="toc-text">authors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#maintainers"><span class="toc-number">8.6.</span> <span class="toc-text">maintainers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#readme"><span class="toc-number">8.7.</span> <span class="toc-text">readme</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#homepage"><span class="toc-number">8.8.</span> <span class="toc-text">homepage</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#repository"><span class="toc-number">8.9.</span> <span class="toc-text">repository</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#classifiers"><span class="toc-number">8.10.</span> <span class="toc-text">classifiers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#packages"><span class="toc-number">8.11.</span> <span class="toc-text">packages</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#include-and-exclude"><span class="toc-number">8.12.</span> <span class="toc-text">include and exclude</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dependencies-and-dependency-groups"><span class="toc-number">8.13.</span> <span class="toc-text">dependencies and dependency groups</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#scripts"><span class="toc-number">8.14.</span> <span class="toc-text">scripts</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#extras"><span class="toc-number">8.15.</span> <span class="toc-text">extras</span></a></li></ol></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"python依赖管理和打包工具poetry　| 一雾银的博客　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/python-private-pypi/" title="上一篇: python私有pypi库搭建">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/python-httpx/" title="下一篇: python第三方网络库httpx">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/website-login/">网站登录</a></li><li class="post-list-item"><a class="post-list-link" href="/python-private-pypi/">python私有pypi库搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/python-poetry/">python依赖管理和打包工具poetry</a></li><li class="post-list-item"><a class="post-list-link" href="/python-httpx/">python第三方网络库httpx</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-devops-jenkins/">jenkins 初体验</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-prometheus-grafana/">k8s prometheus 展示与告警</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-prometheus-add-targets/">k8s prometheus 添加监控目标</a></li><li class="post-list-item"><a class="post-list-link" href="/linux-iptables/">linux iptables 防火墙</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-prometheus-introduction-install/">k8s prometheus监控</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-helm/">k8s helm</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-cni/">k8s 容器网络接口</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-persistent-volume/">k8s 持久卷</a></li><li class="post-list-item"><a class="post-list-link" href="/generate-a-self-signed-ssl-certificate/">生成自签名SSL证书</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-hpa/">k8s 动态扩缩容</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-auth/">k8s 认证和授权</a></li><li class="post-list-item"><a class="post-list-link" href="/rabbitmq-for-python/">rabbitmq for python</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-scheduler/">k8s 调度</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-etcd/">k8s etcd</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-service-discovery-and-load-balance/">k8s 服务发现和负载均衡</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-service/">k8s service</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-deployment/">k8s deployment</a></li><li class="post-list-item"><a class="post-list-link" href="/pod-settings-and-config/">pod 常用设置和配置</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-force-delete-resource/">k8s 强制删除 pod/pvc/pv/ns 的方法</a></li><li class="post-list-item"><a class="post-list-link" href="/linux-systemd-service-file/">linux中systemd及其service文件</a></li><li class="post-list-item"><a class="post-list-link" href="/linux-signals/">linux 信号介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-learning/">k8s 学习笔记总目录</a></li><li class="post-list-item"><a class="post-list-link" href="/k8s-introduction/">k8s 介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/containerd-introduction/">containerd 介绍 与 docker 总结</a></li><li class="post-list-item"><a class="post-list-link" href="/docker-network/">Docker 网络</a></li><li class="post-list-item"><a class="post-list-link" href="/docker-service-running-principle/">docker 运行原理</a></li><li class="post-list-item"><a class="post-list-link" href="/sphinx-python-documentation-generator/">sphinx - python文档生成器</a></li><li class="post-list-item"><a class="post-list-link" href="/centos8-python-upgrade/">centos8 升级 python 版本</a></li><li class="post-list-item"><a class="post-list-link" href="/docker-file/">docker file</a></li><li class="post-list-item"><a class="post-list-link" href="/yaml-introduction/">yaml 入门</a></li><li class="post-list-item"><a class="post-list-link" href="/docker-introduction/">docker 介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/python-design-patterns-02/">python 设计模式 02</a></li><li class="post-list-item"><a class="post-list-link" href="/python-design-patterns-03/">python 设计模式 03</a></li><li class="post-list-item"><a class="post-list-link" href="/python-design-patterns-01/">python 设计模式 01</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2023-2024 aaron
            </div>
            <div class="footer-right">
                <!--<a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>-->
                <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 10;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

    <script>
        var originTitle = document.title;
        var titleTime;
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                document.title = "(つェ⊂) 我藏好了哦~ " + originTitle;
                clearTimeout(titleTime);
            }
            else {
                document.title = "(*´∇｀*) 被你发现啦~ " + originTitle;
                titleTime = setTimeout(function() {
                    document.title = originTitle;
                }, 2000);
            }
        })
    </script>




    <script async src="/live2d-widget/autoload.js"></script>


  </div>
</body>
</html>